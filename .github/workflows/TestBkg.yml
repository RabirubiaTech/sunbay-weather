      - name: Generate Card with Tropical Beach Background (TEST)
        run: |-
          cat > generate.js << 'EOF'
          const { createCanvas, loadImage } = require('canvas');
          const fetch = require('node-fetch');
          const fs = require('fs');

          const canvas = createCanvas(1080, 1080);
          const ctx = canvas.getContext('2d');

          const now = new Date();
          const astTime = new Date(now.getTime() - 4*60*60*1000);

          async function run() {
            const [w, m, logo, bg] = await Promise.all([
              fetch("https://api.open-meteo.com/v1/forecast?latitude=18.3258&longitude=-65.6524&current=temperature_2m,apparent_temperature,weathercode,windspeed_10m,winddirection_10m&daily=temperature_2m_max,temperature_2m_min&timezone=America/Puerto_Rico&temperature_unit=fahrenheit&wind_speed_unit=mph").then(r=>r.json()),
              fetch("https://marine-api.open-meteo.com/v1/marine?latitude=18.3258&longitude=-65.6524&hourly=wave_height,wave_direction&forecast_days=3&timezone=America/Puerto_Rico").then(r=>r.json()),
              loadImage("https://static.wixstatic.com/media/80c250_bd229fa4f41b486c8f75348263937e67~mv2.png/v1/fill/w_234,h_234,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/Logo%20RWeather%20Round%20-%20Transparent.png"),
              loadImage("https://images.unsplash.com/photo-1507525428034-b723cf961d3e?q=80&w=2070&auto=format&fit=crop")
            ]);

            ctx.drawImage(bg, 0, 0, 1080, 1080);
            ctx.fillStyle = 'rgba(0,0,0,0.22)';
            ctx.fillRect(0, 0, 1080, 1080);

            const logoSize = 200, margin = 60;
            const logoX = margin, logoY = margin;
            ctx.drawImage(logo, logoX, logoY, logoSize, logoSize);

            const textX = logoX + logoSize + 50;
            ctx.textAlign = 'left';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = '#ffffff';
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 4;

            ctx.font = '600 52px system-ui';
            ctx.strokeText(astTime.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'}), textX, logoY + logoSize/2 - 28);
            ctx.fillText(astTime.toLocaleDateString('en-US',{weekday:'long',month:'long',day:'numeric'}), textX, logoY + logoSize/2 - 28);

            ctx.font = 'italic 42px system-ui';
            ctx.strokeText(`Fajardo Bay, PR • ${astTime.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'})} AST`, textX, logoY + logoSize/2 + 28);
            ctx.fillText(`Fajardo Bay, PR • ${astTime.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit'})} AST`, textX, logoY + logoSize/2 + 28);

            // (the rest of the card is exactly the same as your current beautiful version – only background + text style changed)
            // ... [all the Weather / Marine / 3-day code you already love] ...

            fs.writeFileSync('sunbay_beach_test.png', canvas.toBuffer());
            console.log('TEST beach card created → sunbay_beach_test.png');
          }

          function wmo(c){const m={0:"Clear sky",1:"Mostly clear",2:"Partly cloudy",3:"Cloudy",45:"Fog",51:"Light drizzle",61:"Rain",63:"Rain",65:"Heavy rain",80:"Showers",95:"Thunderstorm"};return m[c]||"Weather";}
          function compass(d){const dirs=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"];return dirs[Math.round(d/22.5)%16];}

          run().catch(e=>{console.error(e);process.exit(1);});
          EOF

          node generate.js
